## 02 图形系统

![image-20251228214618030](./计算机图形学.assets/image-20251228214618030.png)

![image-20251228214705019](./计算机图形学.assets/image-20251228214705019.png)

![image-20251228215025106](./计算机图形学.assets/image-20251228215025106.png)

![image-20251228215041050](./计算机图形学.assets/image-20251228215041050.png)

![image-20251228215124941](./计算机图形学.assets/image-20251228215124941.png)

![image-20251228215533638](./计算机图形学.assets/image-20251228215533638.png)

## 03 基本图像生成算法

### **直线段的生成算法** 

<img src="./计算机图形学.assets/image-20251228215700110.png" alt="image-20251228215700110" style="zoom:67%;" />

#### DDA算法（数值微分法）

 **DDA**算法原理： 从初始点出发，不断寻找位于直线上的下一个点，直到线段的终点

![image-20251228215935944](./计算机图形学.assets/image-20251228215935944.png)

![image-20251228220010954](./计算机图形学.assets/image-20251228220010954.png)

![image-20251228220032857](./计算机图形学.assets/image-20251228220032857.png)

#### **中点**Bresenham算法

![image-20251228220148414](./计算机图形学.assets/image-20251228220148414.png)

![image-20251228220219817](./计算机图形学.assets/image-20251228220219817.png)

![image-20251228220257324](./计算机图形学.assets/image-20251228220257324.png)

![image-20251228220334691](./计算机图形学.assets/image-20251228220334691.png)

![image-20251228220457683](./计算机图形学.assets/image-20251228220457683.png)

![image-20251228220508443](./计算机图形学.assets/image-20251228220508443.png)

![image-20251228220515848](./计算机图形学.assets/image-20251228220515848.png)

![image-20251228222006177](./计算机图形学.assets/image-20251228222006177.png)

![](./计算机图形学.assets/image-20251228221530049.png)

#### 改进Bresenham算法

**判别式** **d:** 直线与网格线的交点与下面网格点的距离 d 大于还是小于0.5？

![image-20251228230339372](./计算机图形学.assets/image-20251228230339372.png)

![image-20251228230404968](./计算机图形学.assets/image-20251228230404968.png)

![image-20251228230416086](./计算机图形学.assets/image-20251228230416086.png)



## 04 二维观察

### 直线段的裁剪：

#### Cohen-Sutherland算法

四位二进制码：上下右左

![image-20251228133424786](./计算机图形学.assets/image-20251228133424786.png)

裁剪过程：

判断：

![image-20251228133450174](./计算机图形学.assets/image-20251228133450174.png)

裁剪：

![image-20251228133518587](./计算机图形学.assets/image-20251228133518587.png)

#### 中点分割算法

![image-20251228133753531](./计算机图形学.assets/image-20251228133753531.png)

### 多边形的裁剪

####  Sutherland-Hodgeman多边形裁剪

基本思想：将多边形的边界作为一个整体，每次用窗口的一条边界对要裁剪的多边形进行裁剪，体现分而治之的思想。

算法实施策略：

* 建立输入与输出顶点表，分别表示一个顶点的序列。

* 对窗口的一条裁剪边界，遍历当前的输入顶点表内的顶点；得到输出顶点表。

* 当前裁剪边界的输出顶点表将用窗口的下一条边界的输入顶点表，继续裁剪。

![image-20251228135006588](./计算机图形学.assets/image-20251228135006588.png)

![image-20251228135042419](./计算机图形学.assets/image-20251228135042419.png)

#### Weiler-Atherton多边形裁剪

将多边形定义为Ps，窗口矩形为Pw。l 按顺时针方向处理顶点，从Ps的任一点出发，跟踪检测Ps的每一条边，当Ps与Pw相交时（实交点），按如下规则处理： 

![image-20251228141416454](./计算机图形学.assets/image-20251228141416454.png)

![image-20251228141356031](./计算机图形学.assets/image-20251228141356031.png)

![image-20251228141406035](./计算机图形学.assets/image-20251228141406035.png)

![image-20251228141427452](./计算机图形学.assets/image-20251228141427452.png)

## 05 几何变换

概念：几何变换（图形变换）将一个图形的每个点映射到一个新的位置，得到一个新的图形。

###  二维基本几何变换

#### 平移

平移：一个点加上一个平移向量得到变换后的点

**图形的平移**：图形上所有点加上相同的平移向量。

**多边形的平移**：对多边形的顶点进行平移，然后将变换后的顶点连接起来，得到变换后的多边形。

<img src="./计算机图形学.assets/image-20251228141942330.png" alt="image-20251228141942330" style="zoom:50%;" />

#### 关于原点的放缩

<img src="./计算机图形学.assets/image-20251228142048486.png" alt="image-20251228142048486" style="zoom: 33%;" />

<img src="./计算机图形学.assets/image-20251228142059996.png" alt="image-20251228142059996" style="zoom:50%;" />

#### 绕原点的旋转

变换前的点跟变换后的点在一个圆上， 用圆的参数方程表示点：
$$
\left\{
\begin{aligned}
	x=r·cos\phi \\
	y=r·sin\phi \\
\end{aligned}
\right.
$$
<img src="./计算机图形学.assets/image-20251228143135786.png" alt="image-20251228143135786" style="zoom:50%;" />

#### 总结

![image-20251228143243890](./计算机图形学.assets/image-20251228143243890.png)

### 齐次坐标的表示

![image-20251228143552371](./计算机图形学.assets/image-20251228143552371.png)

![image-20251228143606561](./计算机图形学.assets/image-20251228143606561.png)

![image-20251228143616969](./计算机图形学.assets/image-20251228143616969.png)

![image-20251228143640295](./计算机图形学.assets/image-20251228143640295.png)

![image-20251228143654731](./计算机图形学.assets/image-20251228143654731.png)

### 复合变换

![image-20251228143805095](./计算机图形学.assets/image-20251228143805095.png)

![image-20251228143834427](./计算机图形学.assets/image-20251228143834427.png)

![image-20251228143840884](./计算机图形学.assets/image-20251228143840884.png)

### 坐标系转换

![image-20251228144001691](./计算机图形学.assets/image-20251228144001691.png)

![image-20251228144009626](./计算机图形学.assets/image-20251228144009626.png)

### 三维几何变换

![image-20251228144101573](./计算机图形学.assets/image-20251228144101573.png)

![image-20251228144348985](./计算机图形学.assets/image-20251228144348985.png)

![image-20251228144413085](./计算机图形学.assets/image-20251228144413085.png)

![image-20251228144425393](./计算机图形学.assets/image-20251228144425393.png)

![image-20251228144538787](./计算机图形学.assets/image-20251228144538787.png)

#### 三维坐标系转换

![image-20251228144703095](./计算机图形学.assets/image-20251228144703095.png)

## 06 三维观察

三维观察是从三维场景到二维图形的变换过程

三维观察的变换过程类比于用相机照相的过程

### 建模变换

<img src="./计算机图形学.assets/image-20251228145028835.png" alt="image-20251228145028835" style="zoom:50%;" />

<img src="./计算机图形学.assets/image-20251228145113020.png" alt="image-20251228145113020" style="zoom:50%;" />

**层次建模**：一个复杂图形由一些基本图形经层次结构的几何变换组合而成

<img src="./计算机图形学.assets/image-20251228145233565.png" alt="image-20251228145233565" style="zoom:33%;" />

### 视点变换

从拍照者（相机）的角度看待模型

将物体表示为相对于相机的位置

(1) 定义相机的坐标系：视点坐标系

(2) 将物体从世界坐标系变换到视点坐标系

![image-20251228145429956](./计算机图形学.assets/image-20251228145429956.png)

![image-20251228145534864](./计算机图形学.assets/image-20251228145534864.png)

### 投影变换

![image-20251228145604041](./计算机图形学.assets/image-20251228145604041.png)

**平行投影：**投影中心在无穷远处

**透视投影**：投影中心非无穷远

![image-20251228145750018](./计算机图形学.assets/image-20251228145750018.png)

![image-20251228145821251](./计算机图形学.assets/image-20251228145821251.png)

![image-20251228150015638](./计算机图形学.assets/image-20251228150015638.png)

定义投影面上一个窗口

能够投影到该窗口内的范围构成观察空间

![image-20251228150142589](./计算机图形学.assets/image-20251228150142589.png)

![image-20251228150211462](./计算机图形学.assets/image-20251228150211462.png)

![image-20251228150317687](./计算机图形学.assets/image-20251228150317687.png)



### 视口变换

目的：投影得到的二维图形变换到显示器的视区。

视口变换发生在投影到2D 投影平面之后，该变换是将投影之后规范化的点映射到屏幕上一块区域内的坐标。

### 总结

<img src="./计算机图形学.assets/image-20251228160903322.png" alt="image-20251228160903322" style="zoom:200%;" />

## 07 三维建模

### 边界表示

用组成实体边界的基本元素(即顶点、边和面)及其连接关系信息表示实体。

采用边界表示法定义的实体为有限数量的面的集合，面则由边及顶点加以定义。

1. 用多边形表示物体的边界

兔子模型由一些三角片拼接构成，这样的模型称为多边形网格模型。

2. 用光滑曲面表示物体的边界

汽车模型由一些弯曲曲面片拼接构成光滑的曲面模型，曲面片由控制网格定义。

### 空间分解表示

1. 均匀分解

   <img src="./计算机图形学.assets/image-20251228161353639.png" alt="image-20251228161353639" style="zoom: 33%;" />

2. 采用多种体素的分解

![image-20251228161430335](./计算机图形学.assets/image-20251228161430335.png)

#### 八叉数划分

自适应分割 

对包含物体边界的立方体做细分

![image-20251228161645120](./计算机图形学.assets/image-20251228161645120.png)

#### 构造实体几何法

<img src="./计算机图形学.assets/image-20251228161807061.png" alt="image-20251228161807061" style="zoom:50%;" />

<img src="./计算机图形学.assets/image-20251228161906629.png" alt="image-20251228161906629" style="zoom:67%;" />

#### 扫描表示

![image-20251228161931336](./计算机图形学.assets/image-20251228161931336.png)

##### ![image-20251228162006521](./计算机图形学.assets/image-20251228162006521.png)

![image-20251228162014505](./计算机图形学.assets/image-20251228162014505.png)

![image-20251228162027326](./计算机图形学.assets/image-20251228162027326.png)

![image-20251228162036737](./计算机图形学.assets/image-20251228162036737.png)

#### 隐式表示

显示表示：直接指定三维模型的点的空间坐标。

隐式表示：不直接指定模型点的坐标，而是用方程的解来表示。

<img src="./计算机图形学.assets/image-20251228162300104.png" alt="image-20251228162300104" style="zoom:67%;" />

<img src="./计算机图形学.assets/image-20251228162412719.png" alt="image-20251228162412719" style="zoom:67%;" />

![image-20251228162543759](./计算机图形学.assets/image-20251228162543759.png)

![image-20251228162557601](./计算机图形学.assets/image-20251228162557601.png)

### 曲线曲面造型概述

网格曲面和光滑曲面

工业产品的形状表示方法分为两类：

* 初等解析曲面：例如平面、圆柱面、圆锥面、球面，大多数机械零件属于这一类。

* 自由曲线曲面：不能由初等解析曲面组成，例如飞机，汽车，船舶的外形

1963年，美国波音(Boeing)飞机公司的Ferguson将曲线曲面表示成参数矢量函数形式，从此，参数形式成为自由曲线曲面数学描述的标准形式

1964年 MIT的孔斯（Coons）用封闭曲线的四条边界定义一块曲面

1971年 雷诺汽车公司的贝塞尔（Bezier）发表了用控制多边形定义曲线和曲面的方法；同期，法国雪铁龙汽车公司的德卡斯特里奥（de Castelijau）独立研究出类似方法

 1974年，美国通用汽车公司的戈登（Gorden）和里森费尔德（Riesenfeld）将B样条理论用于形状描述，提出了B样条曲线和曲面

1975年，美国Syracuse大学的佛斯普里尔（Versprill）提出了有理B样条方法。

1980年代后期皮格尔（Piegl）和蒂勒（Tiller）将有理B样条发展成非均匀有理B样条方法（NURBS），成为目前自由曲线和曲面描述的最广为流行的技术

#### 曲线曲面的表示方法

![image-20251228163146619](./计算机图形学.assets/image-20251228163146619.png)

![image-20251228163302380](./计算机图形学.assets/image-20251228163302380.png)

![image-20251228163314939](./计算机图形学.assets/image-20251228163314939.png)

![image-20251228163335542](./计算机图形学.assets/image-20251228163335542.png)

![image-20251228163354916](./计算机图形学.assets/image-20251228163354916.png)

![image-20251228163656013](./计算机图形学.assets/image-20251228163656013.png)

![image-20251228163958700](./计算机图形学.assets/image-20251228163958700.png)

![image-20251228163804647](./计算机图形学.assets/image-20251228163804647.png)

![image-20251228164227529](./计算机图形学.assets/image-20251228164227529.png)

## 08 Bézier曲线曲面

![image-20251228164439337](./计算机图形学.assets/image-20251228164439337.png)

![image-20251228164714977](./计算机图形学.assets/image-20251228164714977.png)

![image-20251228165834184](./计算机图形学.assets/image-20251228165834184.png)

![image-20251228165903825](./计算机图形学.assets/image-20251228165903825.png)

![image-20251228165843045](./计算机图形学.assets/image-20251228165843045.png)

![image-20251228165930120](./计算机图形学.assets/image-20251228165930120.png)

![image-20251228170335837](./计算机图形学.assets/image-20251228170335837.png)

![image-20251228173127241](./计算机图形学.assets/image-20251228173127241.png)

## 09 光照模型

### 光线跟踪算法

![image-20251228204053100](./计算机图形学.assets/image-20251228204053100.png)

![image-20251228204107092](./计算机图形学.assets/image-20251228204107092.png)

![image-20251228204117575](./计算机图形学.assets/image-20251228204117575.png)

光线跟踪算法的缺点：

光线跟踪算法的计算量大

* 原因1：每一个像素都要进行光线跟踪
* 原因2：光线跟踪包含大量求交运算，为了找到光线相交的物体，需要将光线跟场景中所有的物体进行求交，判断是否有交点

![image-20251228204304134](./计算机图形学.assets/image-20251228204304134.png)

![image-20251228204424811](./计算机图形学.assets/image-20251228204424811.png)

![image-20251228204438439](./计算机图形学.assets/image-20251228204438439.png)

## 10 隐藏面消除

三维模型经投影变换得到二维图形，需要根据深度信息，生成消隐的结果。

消隐：在绘制时消除被遮挡的不可见的线或面。

![image-20251228204607555](./计算机图形学.assets/image-20251228204607555.png)

消隐的作用：

* 消除二义性
* 生成真实感图像

![image-20251228204710034](./计算机图形学.assets/image-20251228204710034.png)

![image-20251228204759971](./计算机图形学.assets/image-20251228204759971.png)

### 深度缓冲器算法（Z-Buffer算法）

基本思想：

* 深度值小的多边形遮挡深度值大的多边形

* 像素的颜色为视线上深度值最小的多边形颜色

帧缓冲器--保存各像素颜色值 

Z缓冲器 --保存各像素处物体深度值 

Z缓冲器中的单元与帧缓冲器中的单元一一对应

思想：

1. 初始将Z缓冲器每个单元的值设为最大深度值
2. 逐个处理所有的多边形，对多边形进行扫描转换，判断多边形的像素点的深度值是否小于该像素现有Z缓冲器的值
   * 如果小于，说明当前多边形的点更靠近视点，用它的颜色替换像素原来的颜色。
   * 否则说明在当前像素处，当前多边形被前面所绘制的多边形遮挡，像素的颜色值不改变。

![image-20251228205113163](./计算机图形学.assets/image-20251228205113163.png)

### 光线投射算法

算法思想：

将通过绘图窗口每个像素的投影线与场景中的所有多边形求交。

* 若有交点，用深度值最小的交点（最近交点）所属的多边形的颜色显示该像素；
* 若无交点，说明没有多边形覆盖此像素，用背景色显示。

![image-20251228205243279](./计算机图形学.assets/image-20251228205243279.png)

![image-20251228205330132](./计算机图形学.assets/image-20251228205330132.png)

### 区域分割算法

![image-20251228213008490](./计算机图形学.assets/image-20251228213008490.png)

若一个区域与多边形的关系为下面四种情况，不必再做进一步的分割，可直接绘制。

情况1. 所有的多边形与区域分离 

操作： 区域内显示背景颜色值

情况2. 一个区域只有一个相交的多边形，或者只有一个被包含的多边形

操作：对区域首先填充背景值，然后对多边形进行扫描转换。对于相交的多边形，只对被包含的部分进行扫描转换

情况3. 只有一个包围的多边形，无其它的多边形

操作：整个区域填充该多边形的象素颜色值

情况4. 有多于一个的包围的、相交的或被包围的多边形，且存在一个包围的多边形位于所有其它多边形的前面 

操作：整个区域填充为这个多边形的象素颜色值

![image-20251228213346945](./计算机图形学.assets/image-20251228213346945.png)

分割策略：平均分割

Wanock提出的最初的区域分割算法是每次把区域分成四个正方形。

![image-20251228213428035](./计算机图形学.assets/image-20251228213428035.png)

![image-20251228213557170](./计算机图形学.assets/image-20251228213557170.png)

### 画家算法:深度排序算法

算法基本思想：

1）把屏幕置成背景色。

2）建立深度优先级表：将场景物体的所有面（多边形）按距视点的远近进行排序，距视点远的面放在表头。

3）从表头到表尾（从远到近的顺序）逐个绘制多边形

如何建立深度优先级表,即如何对场景中的多边形按深度排序?

![image-20251228213659455](./计算机图形学.assets/image-20251228213659455.png)

![](./计算机图形学.assets/image-20251228213720835.png)

![image-20251228213803786](./计算机图形学.assets/image-20251228213803786.png)

![image-20251228213811564](./计算机图形学.assets/image-20251228213811564.png)

![image-20251228213824595](./计算机图形学.assets/image-20251228213824595.png)

![image-20251228213838925](./计算机图形学.assets/image-20251228213838925.png)

### BSP树算法

![image-20251228213911467](./计算机图形学.assets/image-20251228213911467.png)

![image-20251228213947225](./计算机图形学.assets/image-20251228213947225.png)

![image-20251228214009110](./计算机图形学.assets/image-20251228214009110.png)

![image-20251228214052758](./计算机图形学.assets/image-20251228214052758.png)

### 八叉树算法

![image-20251228214136159](./计算机图形学.assets/image-20251228214136159.png)

![image-20251228214205045](./计算机图形学.assets/image-20251228214205045.png)

![image-20251228214344653](./计算机图形学.assets/image-20251228214344653.png)

![image-20251228214353188](./计算机图形学.assets/image-20251228214353188.png)

![image-20251228214400313](./计算机图形学.assets/image-20251228214400313.png)

![image-20251228214407160](./计算机图形学.assets/image-20251228214407160.png)